{% extends 'base.html' %}
{% block title_page %}
فروشگاه
{% endblock %}
{% block continer_page %}
  {% load thumbnail %}
  <!-- Breadcrumb Section Start -->
    <section class="breadscrumb-section pt-0">
        <div class="container-fluid-lg">
            <div class="row">
                <div class="col-12">
                    <div class="breadscrumb-contain">
                        <h2>فروشگاه : سایدبار راست</h2>
                        <nav>
                            <ol class="breadcrumb mb-0">
                                <li class="breadcrumb-item">
                                    <a href="{% url 'home' %}">
                                        <i class="fa-solid fa-house"></i>
                                    </a>
                                </li>
                                <li class="breadcrumb-item active" aria-current="page">فروشگاه : سایدبار راست</li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Breadcrumb Section End -->

    <!-- Poster Section Start -->
    <section id="main-product">
        <div class="container-fluid-lg">
            <div class="row">
                <div class="col-12">
                    <div class="slider-1 slider-animate product-wrapper no-arrow">
                        {% for site_setting in site_settings %}
                            {% if site_setting.page == 'product_list' %}
                                <div>
                                    <div class="banner-contain-2 hover-effect">
                                        <img src="{{ site_setting.image.url }}" class="bg-img rounded-3 blur-up lazyload" alt="">
                                        <div
                                            class="banner-detail p-center-right position-relative shop-banner ms-auto banner-small">
                                            <div>
                                                <h2>{{ site_setting.description }}</h2>
                                                <h3>{{ site_setting.short_description }}</h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}




                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Poster Section End -->

    <!-- Shop Section Start -->
    <section class="section-b-space shop-section">
        <div class="container-fluid-lg">
            <div class="row">
                <div class="col-xxl-3 col-lg-4">
                    <div class="left-box wow fadeInUp">
                        <div class="shop-left-sidebar">
                            <div class="back-button">
                                <h3><i class="fa-solid fa-arrow-left"></i> بازگشت</h3>
                            </div>

                            <div class="filter-category">
                                <div class="filter-title">
                                    <h2>فیلتر</h2>
                                    <a href="#">حذف فیلتر</a>
                                </div>
                                <ul>

                                </ul>
                            </div>
                            <form method="get">
                                {{ filter.form.as_p }}
                                <button type="submit">فیلتر</button>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="col-xxl-9 col-lg-8">
                    <div class="show-button">
                        <div class="filter-button-group mt-0">
                            <div class="filter-button d-inline-block d-lg-none">
                                <a><i class="fa-solid fa-filter"></i> منوی فیلتر</a>
                            </div>
                        </div>

                        <div class="top-filter-menu">
                            <div class="category-dropdown">
                                <h5 class="text-content">مرتب سازی بر اساس :</h5>
                                <div class="dropdown">
                                    <button class="dropdown-toggle" type="button" id="dropdownMenuButton1"
                                        data-bs-toggle="dropdown">
                                        <span>{{ base_ordering }}</span> <i class="fa-solid fa-angle-down"></i>
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                                        <li>
                                            <a class="dropdown-item" id="all" href="{% url 'main_product' %}" >همه</a>
                                        </li>
                                        <li>
                                            <a class="dropdown-item" id="pop" href="{% url 'main_product' %}?mostPopular=high" >محبوبترین</a>
                                        </li>
                                        <li>
                                            <a class="dropdown-item" id="low" href="{% url 'main_product' %}?price_filter=low">کمترین قیمت</a>
                                        </li>
                                        <li>
                                            <a class="dropdown-item" id="high" href="{% url 'main_product' %}?price_filter=high">بیشترین قیمت</a>
                                        </li>
                                        <li>
                                            <a class="dropdown-item" id="rating" href="{% url 'main_product' %}?score_filter=high">امتیاز</a>
                                        </li>
                                        <li>
                                            <a class="dropdown-item" id="off" href="{% url 'main_product' %}?discount_filter=high">بیشترین تخفیف</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="grid-option">
                                <ul>
                                    <li class="three-grid d-xxl-inline-block d-none">
                                        <a href="javascript:void(0)">
                                            <img src="/static/Front/svg/grid-3.svg" class="blur-up lazyload" alt="">
                                        </a>
                                    </li>
                                    <li class="grid-btn active">
                                        <a href="javascript:void(0)">
                                            <img src="/static/Front/svg/grid-4.svg"
                                                class="blur-up lazyload d-lg-inline-block d-none" alt="">
                                            <img src="/static/Front/svg/grid.svg"
                                                class="blur-up lazyload img-fluid d-lg-none d-inline-block" alt="">
                                        </a>
                                    </li>
                                    <li class="list-btn">
                                        <a href="javascript:void(0)">
                                            <img src="/static/Front/svg/list.svg" class="blur-up lazyload" alt="">
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div
                        class="row g-sm-4 g-3 row-cols-xxl-4 row-cols-xl-3 row-cols-lg-2 row-cols-md-3 row-cols-2 product-list-section">

                        {% for product in products %}
                                <div>
                                <div class="product-box-3 h-100 wow fadeInUp" data-wow-delay="0.45s">
                                    <div class="product-header">
                                        <div class="product-image">
                                            <a href="{% url 'ditail_product' product.slug  %}">
{#                                                {% thumbnail product.image "194x198" quality=100 crop='center' as im %}#}
                                                    <img src="{{ product.image.url }}"
                                                    class="img-fluid blur-up lazyload" alt="">
{#                                                {% endthumbnail %}#}
                                                <ass></ass>
                                            </a>

                                            <ul class="product-option">
                                                <li data-bs-toggle="tooltip" data-bs-placement="top" title="نمایش">
                                                    <a href="{% url 'ditail_product' product.slug %}" data-bs-toggle="modal"
                                                        data-bs-target="#view">
                                                        <div style="margin-right: 20px;"><i data-feather="eye"></i></div>
                                                    </a>
                                                </li>

                                                <li data-bs-toggle="tooltip" data-bs-placement="top" title="مقایسه">
                                                    <a href="{% url 'compare' %}?slug={{ product.slug }}">
                                                        <div style="margin-right: 20px;"><i data-feather="refresh-cw"></i></div>
                                                    </a>
                                                </li>
                                                {% if user != None %}
                                                    <li data-bs-toggle="tooltip"  data-bs-placement="top" title="افزودن به لیست علاقه‌مندی‌ها">
                                                        <a id="favorite" onclick="Add({{ product.id }})" class="notifi-wishlist">
                                                            <i onclick="Like({{ product.id }})" id="iconR-{{ product.id }}" class="fa-regular fa-heart" style="display: {% if not product.id in product_id %}block{% else %}none{% endif %};"></i>
                                                            <i onclick="Like({{ product.id }})" id="iconS-{{ product.id }}" class="fa-solid fa-heart" style="display:{% if product.id in product_id %}block{% else %}none{% endif %};"></i>
                                                        </a>
                                                    </li>
                                                    <script src="/static/Front/js/product.js"></script>
                                                {% endif %}

                                            </ul>
                                        </div>
                                    </div>

                                    <div class="product-footer">
                                        <div class="product-detail">
                                            <span class="span-name">{{ product.category }}</span>
                                            <a href="{% url 'ditail_product' product.slug %}">
                                                <h5 class="name">{{ product.product_name }}</h5>
                                            </a>
                                            <p class="text-content mt-1 mb-2 product-content">{{ product.description }}</p>
                                            <div class="product-rating mt-2">
                                                <ul class="rating">
                                                    <li>
                                                        <i data-feather="star" class="fill"></i>
                                                    </li>
                                                </ul>
                                                <span>({{ product.score }})</span>
                                            </div>
                                            <h6 class="unit">{{ product.weight }}</h6>
                                            <h5 class="price"><span class="theme-color">{{ product.price_after_discount }} تومان</span> <del>{{ product.price }}</del>
                                            </h5>
                                            <div class="add-to-cart-box bg-white">
                                                <button class="btn btn-add-cart addcart-button" onclick="AddProductBasketBuy({{ product.id }})">افزودن
                                                    <span class="add-icon bg-light-gray"> <i class="fa-solid fa-plus"></i> </span></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}

                    </div>

{#                    <nav class="custome-pagination">#}
{#                        <ul class="pagination justify-content-center">#}
{#                            {% if page_obj.has_previous %}#}
{#                                <li class="page-item">#}
{#                                    <a class="page-link" href="?page={{ page_obj.previous_page_number }}">#}
{#                                        <i class="fa-solid fa-angles-right"></i>#}
{#                                    </a>#}
{#                                </li>#}
{#                            {% endif %}#}
{#                            {% for page in paginator.page_range %}#}
{#                                <li class="page-item{% if page_obj.number == page %} active {% endif %}">#}
{#                                    <a class="page-link" href="?page={{ page }}">{{ page }}</a>#}
{#                                </li>#}
{#                            {% endfor %}#}
{#                            {% if page_obj.has_next %}#}
{#                                <li class="page-item">#}
{#                                    <a class="page-link" href="?page={{ page_obj.next_page_number }}">#}
{#                                        <i class="fa-solid fa-angles-left"></i>#}
{#                                    </a>#}
{#                                </li>#}
{#                            {% endif %}#}
{#                        </ul>#}
{#                    </nav>#}
                </div>
            </div>
        </div>
    </section>
    <!-- Shop Section End -->
    {% if warning == "TCNS" %}
    <script>
                     Swal.fire({
                          title: "دسته بندی محصولات یکسان نیست!",
                          text: "برای اینکه محصولات را با هم مقایسه کنید باید از یک دسته بندی باشند",
                          icon: "warning",
                          confirmButtonText: "باشه"
                        });
    </script>
    {% endif %}
{% endblock %}